[Launch]
ProgramExecutable=\lazarus\lazarus.exe
CommandLineArguments=--no-splash-screen --primary-config-path=%PAL:DataDir%\lazarus --lazarusdir=%PAL:AppDir%\lazarus
DirectoryMoveOK=yes

[Activate]
XML=true

[DirectoriesMove]
FreePascal=%LOCALAPPDATA%\FreePascal

[FilesMove]
fpc.cfg=%PAL:AppDir%\lazarus\fpc\2.6.4\bin\i386-win32

[FileWrite1]
Type=Replace
File=%PAL:AppDir%\lazarus\lazarus.cfg
Find=%STARTINGAPPDIR%
Replace=%PAL:AppDir%

[FileWrite2]
Type=Replace
File=%PAL:DataDir%\lazarus\environmentoptions.xml
Find=%STARTINGAPPDIR%
Replace=%PAL:AppDir%

[FileWrite3]
Type=Replace
File=%PAL:DataDir%\lazarus\environmentoptions.xml
Find=%STARTINGTEMPDIR%
Replace=%TEMP%

[FileWrite4]
Type=Replace
File=%PAL:DataDir%\lazarus\environmentoptions.xml
Find=%STARTINGDATADIR%
Replace=%PAL:DataDir%

[FileWrite5]
Type=Replace
File=%PAL:AppDir%\lazarus\lazarus.cfg
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%
Replace=%PAL:Drive%%PAL:PackagePartialDir%

[FileWrite6]
Type=Replace
File=%PAL:DataDir%\lazarus\environmentoptions.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%
Replace=%PAL:Drive%%PAL:PackagePartialDir%

[FileWrite7]
Type=Replace
File=%PAL:DataDir%\lazarus\fpc.cfg
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%
Replace=%PAL:Drive%%PAL:PackagePartialDir%

[FileWrite8]
Type=Replace
File=%PAL:DataDir%\lazarus\codetoolsoptions.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%
Replace=%PAL:Drive%%PAL:PackagePartialDir%

[FileWrite9]
Type=Replace
File=%PAL:DataDir%\lazarus\editoroptions.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%
Replace=%PAL:Drive%%PAL:PackagePartialDir%

[FileWrite10]
Type=Replace
File=%PAL:DataDir%\lazarus\fpcdefines.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%
Replace=%PAL:Drive%%PAL:PackagePartialDir%

[FileWrite11]
Type=Replace
File=%PAL:DataDir%\lazarus\helpoptions.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%
Replace=%PAL:Drive%%PAL:PackagePartialDir%

[FileWrite12]
Type=Replace
File=%PAL:DataDir%\lazarus\environmentoptions.xml
Find=%PAL:LastPortableAppsDir%\
Replace=%PAL:PortableAppsDir%\

[FileWrite13]
Type=Replace
File=%PAL:DataDir%\lazarus\fpc.cfg
Find=%PAL:LastPortableAppsDir%\
Replace=%PAL:PortableAppsDir%\

[FileWrite14]
Type=Replace
File=%PAL:DataDir%\lazarus\codetoolsoptions.xml
Find=%PAL:LastPortableAppsDir%\
Replace=%PAL:PortableAppsDir%\

[FileWrite15]
Type=Replace
File=%PAL:DataDir%\lazarus\editoroptions.xml
Find=%PAL:LastPortableAppsDir%\
Replace=%PAL:PortableAppsDir%\

[FileWrite16]
Type=Replace
File=%PAL:DataDir%\lazarus\fpcdefines.xml
Find=%PAL:LastPortableAppsDir%\
Replace=%PAL:PortableAppsDir%\

[FileWrite17]
Type=Replace
File=%PAL:DataDir%\lazarus\helpoptions.xml
Find=%PAL:LastPortableAppsDir%\
Replace=%PAL:PortableAppsDir%\

[FileWrite18]
Type=Replace
File=%PAL:DataDir%\lazarus\environmentoptions.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite19]
Type=Replace
File=%PAL:DataDir%\lazarus\fpc.cfg
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite20]
Type=Replace
File=%PAL:DataDir%\lazarus\codetoolsoptions.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite21]
Type=Replace
File=%PAL:DataDir%\lazarus\editoroptions.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite22]
Type=Replace
File=%PAL:DataDir%\lazarus\fpcdefines.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite23]
Type=Replace
File=%PAL:DataDir%\lazarus\helpoptions.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite24]
Type=XML attribute
File=%PAL:DataDir%\lazarus\environmentoptions.xml
XPath=/CONFIG/EnvironmentOptions/Language
Attribute=ID
Value=%PAL:LanguageCustom%

[FileWrite25]
Type=XML attribute
File=%PAL:DataDir%\lazarus\environmentoptions.xml
XPath=/CONFIG/EnvironmentOptions/TestBuildDirectory
Attribute=Value
value=%TEMP%

[Language]
Base=%PortableApps.comLocaleglibc%
CheckIfExists=%PAL:AppDir%\lazarus\languages\lazaruside.%PAL:LanguageCustom%.po
DefaultIfNotExists=en

[LanguageStrings]
af=af_ZA
pt=pt_BR
zh=zh_CN

[LanguageFile]
Type=XML attribute
File=%PAL:DataDir%\lazarus\environmentoptions.xml
XPath=CONFIG/EnvironmentOptions/Language
Attribute=ID